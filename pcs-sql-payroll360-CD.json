{"source":2,"revision":44,"description":null,"createdBy":{"displayName":"Mustafa Shaikh","url":"https://spsprodeus21.vssps.visualstudio.com/Ad801ae85-6a4a-4e7c-9127-73b780f12dbc/_apis/Identities/57485d9b-3135-47ed-a071-df154301a4ce","_links":{"avatar":{"href":"https://dev.azure.com/PCSCapital/_apis/GraphProfile/MemberAvatars/aad.MzdkNDJjMzktZWRjZC03ZTg3LTgzZmMtZGNjOTk5ZjdhNTI5"}},"id":"57485d9b-3135-47ed-a071-df154301a4ce","uniqueName":"Shaikhm@pcscapital.com","imageUrl":"https://dev.azure.com/PCSCapital/_apis/GraphProfile/MemberAvatars/aad.MzdkNDJjMzktZWRjZC03ZTg3LTgzZmMtZGNjOTk5ZjdhNTI5","descriptor":"aad.MzdkNDJjMzktZWRjZC03ZTg3LTgzZmMtZGNjOTk5ZjdhNTI5"},"createdOn":"2021-01-05T14:58:09.930Z","modifiedBy":{"displayName":"Mustafa Shaikh","url":"https://spsprodeus21.vssps.visualstudio.com/Ad801ae85-6a4a-4e7c-9127-73b780f12dbc/_apis/Identities/57485d9b-3135-47ed-a071-df154301a4ce","_links":{"avatar":{"href":"https://dev.azure.com/PCSCapital/_apis/GraphProfile/MemberAvatars/aad.MzdkNDJjMzktZWRjZC03ZTg3LTgzZmMtZGNjOTk5ZjdhNTI5"}},"id":"57485d9b-3135-47ed-a071-df154301a4ce","uniqueName":"Shaikhm@pcscapital.com","imageUrl":"https://dev.azure.com/PCSCapital/_apis/GraphProfile/MemberAvatars/aad.MzdkNDJjMzktZWRjZC03ZTg3LTgzZmMtZGNjOTk5ZjdhNTI5","descriptor":"aad.MzdkNDJjMzktZWRjZC03ZTg3LTgzZmMtZGNjOTk5ZjdhNTI5"},"modifiedOn":"2021-02-22T12:08:32.677Z","isDeleted":false,"lastRelease":{"id":610,"name":"Release-74","artifacts":[],"_links":{},"description":"Triggered by pcs-sql-payroll360-CI 7196.","releaseDefinition":{"id":2,"projectReference":null,"_links":{}},"createdOn":"2021-04-08T03:03:45.727Z","createdBy":{"displayName":"Mustafa Shaikh","url":"https://spsprodeus21.vssps.visualstudio.com/Ad801ae85-6a4a-4e7c-9127-73b780f12dbc/_apis/Identities/57485d9b-3135-47ed-a071-df154301a4ce","_links":{"avatar":{"href":"https://dev.azure.com/PCSCapital/_apis/GraphProfile/MemberAvatars/aad.MzdkNDJjMzktZWRjZC03ZTg3LTgzZmMtZGNjOTk5ZjdhNTI5"}},"id":"57485d9b-3135-47ed-a071-df154301a4ce","uniqueName":"Shaikhm@pcscapital.com","imageUrl":"https://dev.azure.com/PCSCapital/_apis/GraphProfile/MemberAvatars/aad.MzdkNDJjMzktZWRjZC03ZTg3LTgzZmMtZGNjOTk5ZjdhNTI5","descriptor":"aad.MzdkNDJjMzktZWRjZC03ZTg3LTgzZmMtZGNjOTk5ZjdhNTI5"}},"variables":{"clientIP":{"value":"141.193.29.10"},"env":{"value":"qa"}},"variableGroups":[2,3],"environments":[{"id":2,"name":"QA","rank":1,"owner":{"displayName":"Mustafa Shaikh","url":"https://spsprodeus21.vssps.visualstudio.com/Ad801ae85-6a4a-4e7c-9127-73b780f12dbc/_apis/Identities/57485d9b-3135-47ed-a071-df154301a4ce","_links":{"avatar":{"href":"https://dev.azure.com/PCSCapital/_apis/GraphProfile/MemberAvatars/aad.MzdkNDJjMzktZWRjZC03ZTg3LTgzZmMtZGNjOTk5ZjdhNTI5"}},"id":"57485d9b-3135-47ed-a071-df154301a4ce","uniqueName":"Shaikhm@pcscapital.com","imageUrl":"https://dev.azure.com/PCSCapital/_apis/GraphProfile/MemberAvatars/aad.MzdkNDJjMzktZWRjZC03ZTg3LTgzZmMtZGNjOTk5ZjdhNTI5","descriptor":"aad.MzdkNDJjMzktZWRjZC03ZTg3LTgzZmMtZGNjOTk5ZjdhNTI5"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":4}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":5},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":6}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":{"identifier":"vs2017-win2016"},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":464,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Agent job","refName":null,"workflowTasks":[{"environment":{},"taskId":"94a74903-f93f-4075-884f-dc11f34058b4","version":"3.*","name":"ARM Template deployment: Resource Group scope","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"deploymentScope":"Resource Group","ConnectedServiceName":"5b7a5194-25d1-4b3f-8ad3-c3073ab9a0eb","subscriptionName":"8aa224f7-539d-46b5-a81f-385ad15a78ab","action":"Create Or Update Resource Group","resourceGroupName":"pcs-rg-payroll360-project","location":"East US","templateLocation":"Linked artifact","csmFileLink":"","csmParametersFileLink":"","csmFile":"$(System.DefaultWorkingDirectory)/_SQL-Database/ARMTemplate/azuredeploy.json","csmParametersFile":"$(System.DefaultWorkingDirectory)/_SQL-Database/ARMTemplate/azuredeploy.parameters.json","overrideParameters":"-administratorLogin $(administratorLogin) -administratorLoginPassword $(administratorLoginPassword) -serverName $(serverName) -elasticPoolName $(elasticPoolName) -edition Standard -capacity $(capacity) -databaseCapacityMin $(databaseCapacityMin) -databaseCapacityMax $(databaseCapacityMax) -databasesNames [\"$(DBname1)\",\"$(DBname2)\"] -databaseCollation $(databaseCollation) -location $(location)","deploymentMode":"Incremental","deploymentName":"","deploymentOutputs":"","addSpnToEnvironment":"false"}},{"environment":{},"taskId":"ce85a08b-a538-4d2b-8589-1d37a9ab970f","version":"1.*","name":"Azure SQL DacpacTask Config","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceNameSelector":"ConnectedServiceNameARM","ConnectedServiceName":"","ConnectedServiceNameARM":"5b7a5194-25d1-4b3f-8ad3-c3073ab9a0eb","AuthenticationType":"server","ServerName":"$(serverName).database.windows.net","DatabaseName":"$(DBname1)","SqlUsername":"$(administratorLogin)","SqlPassword":"$(administratorLoginPassword)","aadSqlUsername":"","aadSqlPassword":"","ConnectionString":"","TaskNameSelector":"DacpacTask","DeploymentAction":"Publish","DacpacFile":"$(System.DefaultWorkingDirectory)/_SQL-Database/config/config.dacpac","BacpacFile":"","SqlFile":"","SqlInline":"","PublishProfile":"","AdditionalArguments":"","SqlAdditionalArguments":"","InlineAdditionalArguments":"","IpDetectionMethod":"AutoDetect","StartIpAddress":"","EndIpAddress":"","DeleteFirewallRule":"true"}},{"environment":{},"taskId":"ce85a08b-a538-4d2b-8589-1d37a9ab970f","version":"1.*","name":"Azure SQL DacpacTask Ingestion","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceNameSelector":"ConnectedServiceNameARM","ConnectedServiceName":"","ConnectedServiceNameARM":"5b7a5194-25d1-4b3f-8ad3-c3073ab9a0eb","AuthenticationType":"server","ServerName":"$(serverName).database.windows.net","DatabaseName":"$(DBname2)","SqlUsername":"$(administratorLogin)","SqlPassword":"$(administratorLoginPassword)","aadSqlUsername":"","aadSqlPassword":"","ConnectionString":"","TaskNameSelector":"DacpacTask","DeploymentAction":"Publish","DacpacFile":"$(System.DefaultWorkingDirectory)/_SQL-Database/Ingestion/Ingestion.dacpac","BacpacFile":"","SqlFile":"","SqlInline":"","PublishProfile":"","AdditionalArguments":"","SqlAdditionalArguments":"","InlineAdditionalArguments":"","IpDetectionMethod":"AutoDetect","StartIpAddress":"","EndIpAddress":"","DeleteFirewallRule":"true"}},{"environment":{},"taskId":"ce85a08b-a538-4d2b-8589-1d37a9ab970f","version":"1.*","name":"Azure SQL DacpacTask Ingestion","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceNameSelector":"ConnectedServiceNameARM","ConnectedServiceName":"","ConnectedServiceNameARM":"a7523577-9a30-469a-9e3a-b0ad615ad2b5","AuthenticationType":"server","ServerName":"$(SQLservername).database.windows.net","DatabaseName":"ingestion","SqlUsername":"serveradmin","SqlPassword":"Welcome@123","aadSqlUsername":"","aadSqlPassword":"","ConnectionString":"","TaskNameSelector":"DacpacTask","DeploymentAction":"Publish","DacpacFile":"$(System.DefaultWorkingDirectory)/_SQL-Database/Ingestion/Ingestion.dacpac","BacpacFile":"","SqlFile":"","SqlInline":"","PublishProfile":"","AdditionalArguments":"","SqlAdditionalArguments":"","InlineAdditionalArguments":"","IpDetectionMethod":"AutoDetect","StartIpAddress":"","EndIpAddress":"","DeleteFirewallRule":"true"}},{"environment":{},"taskId":"72a1931b-effb-4d2e-8fd8-f8472a07cb62","version":"5.*","name":"Azure PowerShell script: Adder","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceNameARM":"5b7a5194-25d1-4b3f-8ad3-c3073ab9a0eb","ScriptType":"InlineScript","ScriptPath":"","Inline":"If ((Get-AzSqlServerFirewallRule -ResourceGroupName \"pcs-rg-payroll360-project\" -ServerName $(serverName)) -eq $null) {\n    New-AzSqlServerFirewallRule -ResourceGroupName \"pcs-rg-payroll360-project\" -ServerName $(serverName) -FirewallRuleName \"PCSiprange\"-StartIpAddress $(clientIP) -EndIpAddress $(clientIP) -ErrorAction Ignore\n}\nelse {\n    Set-AzSqlServerFirewallRule -ResourceGroupName \"pcs-rg-payroll360-project\" -ServerName $(serverName) -FirewallRuleName \"PCSiprange\"-StartIpAddress $(clientIP) -EndIpAddress $(clientIP) -ErrorAction Ignore\n}","ScriptArguments":"","errorActionPreference":"stop","FailOnStandardError":"false","TargetAzurePs":"LatestVersion","CustomTargetAzurePs":"","pwsh":"false","workingDirectory":""}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":true},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":610,"url":"https://vsrm.dev.azure.com/PCSCapital/7666326d-9bcf-49f5-a562-c1b34008405f/_apis/Release/releases/610","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"BoardsEnvironmentType":{"$type":"System.String","$value":"unmapped"},"LinkBoardsWorkItems":{"$type":"System.String","$value":"False"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/PCSCapital/_apis/public/Release/badge/7666326d-9bcf-49f5-a562-c1b34008405f/2/2"},{"id":5,"name":"Prod","rank":2,"owner":{"displayName":"Mustafa Shaikh","url":"https://spsprodeus21.vssps.visualstudio.com/Ad801ae85-6a4a-4e7c-9127-73b780f12dbc/_apis/Identities/57485d9b-3135-47ed-a071-df154301a4ce","_links":{"avatar":{"href":"https://dev.azure.com/PCSCapital/_apis/GraphProfile/MemberAvatars/aad.MzdkNDJjMzktZWRjZC03ZTg3LTgzZmMtZGNjOTk5ZjdhNTI5"}},"id":"57485d9b-3135-47ed-a071-df154301a4ce","uniqueName":"Shaikhm@pcscapital.com","imageUrl":"https://dev.azure.com/PCSCapital/_apis/GraphProfile/MemberAvatars/aad.MzdkNDJjMzktZWRjZC03ZTg3LTgzZmMtZGNjOTk5ZjdhNTI5","descriptor":"aad.MzdkNDJjMzktZWRjZC03ZTg3LTgzZmMtZGNjOTk5ZjdhNTI5"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"displayName":"Mustafa Shaikh","url":"https://spsprodeus21.vssps.visualstudio.com/Ad801ae85-6a4a-4e7c-9127-73b780f12dbc/_apis/Identities/57485d9b-3135-47ed-a071-df154301a4ce","_links":{"avatar":{"href":"https://dev.azure.com/PCSCapital/_apis/GraphProfile/MemberAvatars/aad.MzdkNDJjMzktZWRjZC03ZTg3LTgzZmMtZGNjOTk5ZjdhNTI5"}},"id":"57485d9b-3135-47ed-a071-df154301a4ce","uniqueName":"Shaikhm@pcscapital.com","imageUrl":"https://dev.azure.com/PCSCapital/_apis/GraphProfile/MemberAvatars/aad.MzdkNDJjMzktZWRjZC03ZTg3LTgzZmMtZGNjOTk5ZjdhNTI5","descriptor":"aad.MzdkNDJjMzktZWRjZC03ZTg3LTgzZmMtZGNjOTk5ZjdhNTI5"},"id":39}],"approvalOptions":{"requiredApproverCount":0,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":15},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":16}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":{"identifier":"vs2017-win2016"},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":464,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Agent job","refName":null,"workflowTasks":[{"environment":{},"taskId":"94a74903-f93f-4075-884f-dc11f34058b4","version":"3.*","name":"ARM Template deployment: Resource Group scope","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"deploymentScope":"Resource Group","ConnectedServiceName":"5b7a5194-25d1-4b3f-8ad3-c3073ab9a0eb","subscriptionName":"8aa224f7-539d-46b5-a81f-385ad15a78ab","action":"Create Or Update Resource Group","resourceGroupName":"pcs-rg-payroll360-project","location":"East US","templateLocation":"Linked artifact","csmFileLink":"","csmParametersFileLink":"","csmFile":"$(System.DefaultWorkingDirectory)/_SQL-Database/ARMTemplate/azuredeploy.json","csmParametersFile":"$(System.DefaultWorkingDirectory)/_SQL-Database/ARMTemplate/azuredeploy.parameters.json","overrideParameters":"-administratorLogin $(administratorLogin) -administratorLoginPassword $(administratorLoginPassword) -serverName $(serverName) -elasticPoolName $(elasticPoolName) -edition Standard -capacity $(capacity) -databaseCapacityMin $(databaseCapacityMin) -databaseCapacityMax $(databaseCapacityMax) -databasesNames [\"$(DBname1)\",\"$(DBname2)\"] -databaseCollation $(databaseCollation) -location $(location)","deploymentMode":"Incremental","deploymentName":"","deploymentOutputs":"","addSpnToEnvironment":"false"}},{"environment":{},"taskId":"ce85a08b-a538-4d2b-8589-1d37a9ab970f","version":"1.*","name":"Azure SQL DacpacTask Config","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceNameSelector":"ConnectedServiceNameARM","ConnectedServiceName":"","ConnectedServiceNameARM":"5b7a5194-25d1-4b3f-8ad3-c3073ab9a0eb","AuthenticationType":"server","ServerName":"$(serverName).database.windows.net","DatabaseName":"$(DBname1)","SqlUsername":"$(administratorLogin)","SqlPassword":"$(administratorLoginPassword)","aadSqlUsername":"","aadSqlPassword":"","ConnectionString":"","TaskNameSelector":"DacpacTask","DeploymentAction":"Publish","DacpacFile":"$(System.DefaultWorkingDirectory)/_SQL-Database/config/config.dacpac","BacpacFile":"","SqlFile":"","SqlInline":"","PublishProfile":"","AdditionalArguments":"","SqlAdditionalArguments":"","InlineAdditionalArguments":"","IpDetectionMethod":"AutoDetect","StartIpAddress":"","EndIpAddress":"","DeleteFirewallRule":"true"}},{"environment":{},"taskId":"ce85a08b-a538-4d2b-8589-1d37a9ab970f","version":"1.*","name":"Azure SQL DacpacTask Ingestion","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceNameSelector":"ConnectedServiceNameARM","ConnectedServiceName":"","ConnectedServiceNameARM":"5b7a5194-25d1-4b3f-8ad3-c3073ab9a0eb","AuthenticationType":"server","ServerName":"$(serverName).database.windows.net","DatabaseName":"$(DBname2)","SqlUsername":"$(administratorLogin)","SqlPassword":"$(administratorLoginPassword)","aadSqlUsername":"","aadSqlPassword":"","ConnectionString":"","TaskNameSelector":"DacpacTask","DeploymentAction":"Publish","DacpacFile":"$(System.DefaultWorkingDirectory)/_SQL-Database/Ingestion/Ingestion.dacpac","BacpacFile":"","SqlFile":"","SqlInline":"","PublishProfile":"","AdditionalArguments":"","SqlAdditionalArguments":"","InlineAdditionalArguments":"","IpDetectionMethod":"AutoDetect","StartIpAddress":"","EndIpAddress":"","DeleteFirewallRule":"true"}},{"environment":{},"taskId":"ce85a08b-a538-4d2b-8589-1d37a9ab970f","version":"1.*","name":"Azure SQL DacpacTask Ingestion","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceNameSelector":"ConnectedServiceNameARM","ConnectedServiceName":"","ConnectedServiceNameARM":"a7523577-9a30-469a-9e3a-b0ad615ad2b5","AuthenticationType":"server","ServerName":"$(SQLservername).database.windows.net","DatabaseName":"ingestion","SqlUsername":"serveradmin","SqlPassword":"Welcome@123","aadSqlUsername":"","aadSqlPassword":"","ConnectionString":"","TaskNameSelector":"DacpacTask","DeploymentAction":"Publish","DacpacFile":"$(System.DefaultWorkingDirectory)/_SQL-Database/Ingestion/Ingestion.dacpac","BacpacFile":"","SqlFile":"","SqlInline":"","PublishProfile":"","AdditionalArguments":"","SqlAdditionalArguments":"","InlineAdditionalArguments":"","IpDetectionMethod":"AutoDetect","StartIpAddress":"","EndIpAddress":"","DeleteFirewallRule":"true"}},{"environment":{},"taskId":"72a1931b-effb-4d2e-8fd8-f8472a07cb62","version":"5.*","name":"Azure PowerShell script: Adder","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceNameARM":"5b7a5194-25d1-4b3f-8ad3-c3073ab9a0eb","ScriptType":"InlineScript","ScriptPath":"","Inline":"If ((Get-AzSqlServerFirewallRule -ResourceGroupName \"pcs-rg-payroll360-project\" -ServerName $(serverName)) -eq $null) {\n    New-AzSqlServerFirewallRule -ResourceGroupName \"pcs-rg-payroll360-project\" -ServerName $(serverName) -FirewallRuleName \"PCSiprange\"-StartIpAddress $(clientIP) -EndIpAddress $(clientIP) -ErrorAction Ignore\n}\nelse {\n    Set-AzSqlServerFirewallRule -ResourceGroupName \"pcs-rg-payroll360-project\" -ServerName $(serverName) -FirewallRuleName \"PCSiprange\"-StartIpAddress $(clientIP) -EndIpAddress $(clientIP) -ErrorAction Ignore\n}","ScriptArguments":"","errorActionPreference":"stop","FailOnStandardError":"false","TargetAzurePs":"LatestVersion","CustomTargetAzurePs":"","pwsh":"false","workingDirectory":""}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"QA","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":0,"url":"https://vsrm.dev.azure.com/PCSCapital/7666326d-9bcf-49f5-a562-c1b34008405f/_apis/Release/releases/0","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"BoardsEnvironmentType":{"$type":"System.String","$value":"testing"},"LinkBoardsWorkItems":{"$type":"System.String","$value":"False"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/PCSCapital/_apis/public/Release/badge/7666326d-9bcf-49f5-a562-c1b34008405f/2/5"},{"id":7,"name":"Dev","rank":3,"owner":{"displayName":"Mustafa Shaikh","url":"https://spsprodeus21.vssps.visualstudio.com/Ad801ae85-6a4a-4e7c-9127-73b780f12dbc/_apis/Identities/57485d9b-3135-47ed-a071-df154301a4ce","_links":{"avatar":{"href":"https://dev.azure.com/PCSCapital/_apis/GraphProfile/MemberAvatars/aad.MzdkNDJjMzktZWRjZC03ZTg3LTgzZmMtZGNjOTk5ZjdhNTI5"}},"id":"57485d9b-3135-47ed-a071-df154301a4ce","uniqueName":"Shaikhm@pcscapital.com","imageUrl":"https://dev.azure.com/PCSCapital/_apis/GraphProfile/MemberAvatars/aad.MzdkNDJjMzktZWRjZC03ZTg3LTgzZmMtZGNjOTk5ZjdhNTI5","descriptor":"aad.MzdkNDJjMzktZWRjZC03ZTg3LTgzZmMtZGNjOTk5ZjdhNTI5"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":20}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":21},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":22}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"agentSpecification":{"identifier":"vs2017-win2016"},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":464,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Agent job","refName":null,"workflowTasks":[{"environment":{},"taskId":"94a74903-f93f-4075-884f-dc11f34058b4","version":"3.*","name":"ARM Template deployment: Resource Group scope","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"deploymentScope":"Resource Group","ConnectedServiceName":"5b7a5194-25d1-4b3f-8ad3-c3073ab9a0eb","subscriptionName":"8aa224f7-539d-46b5-a81f-385ad15a78ab","action":"Create Or Update Resource Group","resourceGroupName":"pcs-rg-payroll360-project","location":"East US","templateLocation":"Linked artifact","csmFileLink":"","csmParametersFileLink":"","csmFile":"$(System.DefaultWorkingDirectory)/_SQL-Database/ARMTemplate/azuredeploy.json","csmParametersFile":"$(System.DefaultWorkingDirectory)/_SQL-Database/ARMTemplate/azuredeploy.parameters.json","overrideParameters":"-administratorLogin $(administratorLogin) -administratorLoginPassword $(administratorLoginPassword) -serverName $(serverName) -elasticPoolName $(elasticPoolName) -edition Standard -capacity $(capacity) -databaseCapacityMin $(databaseCapacityMin) -databaseCapacityMax $(databaseCapacityMax) -databasesNames [\"$(DBname1)\",\"$(DBname2)\"] -databaseCollation $(databaseCollation) -location $(location)","deploymentMode":"Incremental","deploymentName":"","deploymentOutputs":"","addSpnToEnvironment":"false"}},{"environment":{},"taskId":"ce85a08b-a538-4d2b-8589-1d37a9ab970f","version":"1.*","name":"Azure SQL DacpacTask Config","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceNameSelector":"ConnectedServiceNameARM","ConnectedServiceName":"","ConnectedServiceNameARM":"5b7a5194-25d1-4b3f-8ad3-c3073ab9a0eb","AuthenticationType":"server","ServerName":"$(serverName).database.windows.net","DatabaseName":"$(DBname1)","SqlUsername":"$(administratorLogin)","SqlPassword":"$(administratorLoginPassword)","aadSqlUsername":"","aadSqlPassword":"","ConnectionString":"","TaskNameSelector":"DacpacTask","DeploymentAction":"Publish","DacpacFile":"$(System.DefaultWorkingDirectory)/_SQL-Database/config/config.dacpac","BacpacFile":"","SqlFile":"","SqlInline":"","PublishProfile":"","AdditionalArguments":"","SqlAdditionalArguments":"","InlineAdditionalArguments":"","IpDetectionMethod":"AutoDetect","StartIpAddress":"","EndIpAddress":"","DeleteFirewallRule":"true"}},{"environment":{},"taskId":"ce85a08b-a538-4d2b-8589-1d37a9ab970f","version":"1.*","name":"Azure SQL DacpacTask Ingestion","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceNameSelector":"ConnectedServiceNameARM","ConnectedServiceName":"","ConnectedServiceNameARM":"5b7a5194-25d1-4b3f-8ad3-c3073ab9a0eb","AuthenticationType":"server","ServerName":"$(serverName).database.windows.net","DatabaseName":"$(DBname2)","SqlUsername":"$(administratorLogin)","SqlPassword":"$(administratorLoginPassword)","aadSqlUsername":"","aadSqlPassword":"","ConnectionString":"","TaskNameSelector":"DacpacTask","DeploymentAction":"Publish","DacpacFile":"$(System.DefaultWorkingDirectory)/_SQL-Database/Ingestion/Ingestion.dacpac","BacpacFile":"","SqlFile":"","SqlInline":"","PublishProfile":"","AdditionalArguments":"","SqlAdditionalArguments":"","InlineAdditionalArguments":"","IpDetectionMethod":"AutoDetect","StartIpAddress":"","EndIpAddress":"","DeleteFirewallRule":"true"}},{"environment":{},"taskId":"ce85a08b-a538-4d2b-8589-1d37a9ab970f","version":"1.*","name":"Azure SQL DacpacTask Ingestion","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceNameSelector":"ConnectedServiceNameARM","ConnectedServiceName":"","ConnectedServiceNameARM":"a7523577-9a30-469a-9e3a-b0ad615ad2b5","AuthenticationType":"server","ServerName":"$(SQLservername).database.windows.net","DatabaseName":"ingestion","SqlUsername":"serveradmin","SqlPassword":"Welcome@123","aadSqlUsername":"","aadSqlPassword":"","ConnectionString":"","TaskNameSelector":"DacpacTask","DeploymentAction":"Publish","DacpacFile":"$(System.DefaultWorkingDirectory)/_SQL-Database/Ingestion/Ingestion.dacpac","BacpacFile":"","SqlFile":"","SqlInline":"","PublishProfile":"","AdditionalArguments":"","SqlAdditionalArguments":"","InlineAdditionalArguments":"","IpDetectionMethod":"AutoDetect","StartIpAddress":"","EndIpAddress":"","DeleteFirewallRule":"true"}},{"environment":{},"taskId":"72a1931b-effb-4d2e-8fd8-f8472a07cb62","version":"5.*","name":"Azure PowerShell script: Adder","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceNameARM":"5b7a5194-25d1-4b3f-8ad3-c3073ab9a0eb","ScriptType":"InlineScript","ScriptPath":"","Inline":"If ((Get-AzSqlServerFirewallRule -ResourceGroupName \"pcs-rg-payroll360-project\" -ServerName $(serverName)) -eq $null) {\n    New-AzSqlServerFirewallRule -ResourceGroupName \"pcs-rg-payroll360-project\" -ServerName $(serverName) -FirewallRuleName \"PCSiprange\"-StartIpAddress $(clientIP) -EndIpAddress $(clientIP) -ErrorAction Ignore\n}\nelse {\n    Set-AzSqlServerFirewallRule -ResourceGroupName \"pcs-rg-payroll360-project\" -ServerName $(serverName) -FirewallRuleName \"PCSiprange\"-StartIpAddress $(clientIP) -EndIpAddress $(clientIP) -ErrorAction Ignore\n}","ScriptArguments":"","errorActionPreference":"stop","FailOnStandardError":"false","TargetAzurePs":"LatestVersion","CustomTargetAzurePs":"","pwsh":"false","workingDirectory":""}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":609,"url":"https://vsrm.dev.azure.com/PCSCapital/7666326d-9bcf-49f5-a562-c1b34008405f/_apis/Release/releases/609","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"BoardsEnvironmentType":{"$type":"System.String","$value":"testing"},"LinkBoardsWorkItems":{"$type":"System.String","$value":"False"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/PCSCapital/_apis/public/Release/badge/7666326d-9bcf-49f5-a562-c1b34008405f/2/7"}],"artifacts":[{"sourceId":"7666326d-9bcf-49f5-a562-c1b34008405f:23","type":"Build","alias":"_SQL-Database","definitionReference":{"artifactSourceDefinitionUrl":{"id":"https://dev.azure.com/PCSCapital/_permalink/_build/index?collectionId=681187c7-1e33-4336-ad9c-8c412023b52f&projectId=7666326d-9bcf-49f5-a562-c1b34008405f&definitionId=23","name":""},"defaultVersionBranch":{"id":"","name":""},"defaultVersionSpecific":{"id":"","name":""},"defaultVersionTags":{"id":"","name":""},"defaultVersionType":{"id":"latestType","name":"Latest"},"definition":{"id":"23","name":"SQL-Database"},"definitions":{"id":"","name":""},"IsMultiDefinitionType":{"id":"False","name":"False"},"project":{"id":"7666326d-9bcf-49f5-a562-c1b34008405f","name":"MuleSoft"},"repository":{"id":"","name":""}},"isPrimary":true,"isRetained":false}],"triggers":[{"artifactAlias":"_SQL-Database","triggerConditions":[{"sourceBranch":"-master","tags":[],"tagFilter":null,"useBuildDefinitionBranch":false,"createReleaseOnBuildTagging":false}],"triggerType":1},{"artifactAlias":"_SQL-Database","triggerConditions":[{"targetBranch":"master","tags":[]}],"pullRequestConfiguration":{"useArtifactReference":false,"codeRepositoryReference":{"systemType":1,"repositoryReference":{"pullRequestRepositoryId":{"value":"ce733984-ee9e-4bef-85af-8a00d2cf4e94","displayValue":"pcs-sql-payroll360"},"pullRequestProjectId":{"value":"7666326d-9bcf-49f5-a562-c1b34008405f","displayValue":"Payroll Management"}}}},"statusPolicyName":"","triggerType":6}],"releaseNameFormat":"Release-$(rev:r)","tags":[],"properties":{"DefinitionCreationSource":{"$type":"System.String","$value":"ReleaseNew"},"IntegrateBoardsWorkItems":{"$type":"System.String","$value":"False"},"IntegrateJiraWorkItems":{"$type":"System.String","$value":"false"}},"id":2,"name":"pcs-sql-payroll360-CD","path":"\\","projectReference":null,"url":"https://vsrm.dev.azure.com/PCSCapital/7666326d-9bcf-49f5-a562-c1b34008405f/_apis/Release/definitions/2","_links":{"self":{"href":"https://vsrm.dev.azure.com/PCSCapital/7666326d-9bcf-49f5-a562-c1b34008405f/_apis/Release/definitions/2"},"web":{"href":"https://dev.azure.com/PCSCapital/7666326d-9bcf-49f5-a562-c1b34008405f/_release?definitionId=2"}}}